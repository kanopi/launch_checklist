<?php

/**
 * @file
 * Uses best practices to check for pre-launch best practices.
 */

use Drupal\checklistapi\ChecklistapiChecklist;
use Drupal\Core\Routing\RouteMatchInterface;
use Drupal\Core\Url;

/**
 * Implements hook_checklistapi_checklist_info().
 *
 * @see _launch_checklist_preprocess_checklist_items()
 */
function launch_checklist_checklistapi_checklist_info() {
  $definitions = [];
  $definitions['launch_checklist'] = [
    '#title' => t('Launch checklist'),
    '#description' => t('Keep track of your pre-launch tasks.'),
    '#path' => '/admin/config/development/launch-checklist',
    '#callback' => 'launch_checklist_checklistapi_checklist_items',
    '#help' => t("<p>Check off each task as you complete it. Don't forget to click the <em>Save</em> button!</p>"),
  ];
  return $definitions;
}

/**
 * Implements callback_checklistapi_checklist_items() for launch_checklist.
 */
function launch_checklist_checklistapi_checklist_items() {
  $front_route = Url::fromRoute('<front>');

  return [
    // Section 1 General.
    '01_general' => [
      '#title' => t('General'),
      '#description' => t('<p>General settings for the Drupal site.</p>'),
      'site_information_email' => [
        '#title' => t('Verify the site information uses client email'),
        '#description' => t('The From address in automated emails sent during registration and new password requests, and other notifications.'),
        'handbook_page' => [
          '#text' => t('Site Information Email'),
          '#url' => Url::fromRoute('system.site_information_settings'),
        ],
      ],
      'site_information_name' => [
        '#title' => t('Verify the site title tag is correct'),
        '#description' => t('Make sure the Site name field is correct.'),
        'handbook_page' => [
          '#text' => t('Site Information Name'),
          '#url' => Url::fromRoute('system.site_information_settings'),
        ],
      ],
      'favicon' => [
        '#title' => t('Favicon'),
        '#description' => t('Verify Favicon is correct.'),
        'handbook_page' => [
          '#text' => t('Front page of site.'),
          '#url' => $front_route,
        ],
      ],
    ],
    // Section 2 Browser Checks.
    '02_browser_checks' => [
      '#title' => t('Browser Checks'),
      '#description' => t('<p>General settings for the Drupal site.</p>'),
      'site_information_email' => [
        '#title' => t('Verify the site information uses client email'),
        '#description' => t('The From address in automated emails sent during registration and new password requests, and other notifications.'),
        'handbook_page' => [
          '#text' => t('Site Information Email'),
          '#url' => Url::fromRoute('system.site_information_settings'),
        ],
      ],
      'site_information_name' => [
        '#title' => t('Verify the site title tag is correct'),
        '#description' => t('Make sure the Site name field is correct.'),
        'handbook_page' => [
          '#text' => t('Site Information Name'),
          '#url' => Url::fromRoute('system.site_information_settings'),
        ],
      ],
      'favicon' => [
        '#title' => t('Favicon'),
        '#description' => t('Verify Favicon is correct.'),
        'handbook_page' => [
          '#text' => t('Front page of site.'),
          '#url' => $front_route,
        ],
      ],
    ],
  ];
}
